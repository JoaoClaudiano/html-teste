<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testador HTML/CSS/JS | Ferramenta Web Completa</title>
    <meta name="description" content="Ferramenta completa para testar, visualizar e analisar c√≥digo HTML, CSS e JavaScript de forma integrada com abas verticais expans√≠veis.">
    
    <!-- Google Analytics 4 (GA4) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RYCB08HG48"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RYCB08HG48');
    </script>
    
    <!-- Split.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/split.js@1.6.5/dist/split.min.js"></script>
    
    <!-- CodeMirror 5 Core -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/lib/codemirror.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/theme/monokai.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/theme/eclipse.css">
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/lib/codemirror.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/mode/xml/xml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/mode/javascript/javascript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/mode/css/css.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/mode/htmlmixed/htmlmixed.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/addon/edit/closebrackets.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/addon/edit/closetag.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.2/addon/edit/matchbrackets.js"></script>
    
    <style>
        /* Reset e Vari√°veis */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* Theme Light */
            --bg-primary: #f5f5f7;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e8e8ed;
            --text-primary: #1d1d1f;
            --text-secondary: #6e6e73;
            --border-color: #d2d2d7;
            --tab-active: #007acc;
            --tab-inactive: #2d2d30;
            --success: #4CAF50;
            --error: #f44336;
            --warning: #ff9800;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        body.dark-theme {
            /* Theme Dark */
            --bg-primary: #1e1e1e;
            --bg-secondary: #252525;
            --bg-tertiary: #2d2d30;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --border-color: #3e3e42;
            --shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            transition: background 0.3s, color 0.3s;
        }
        
        /* Control Bar */
        .control-bar {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: var(--shadow);
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--tab-active);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .btn-secondary {
            background: var(--text-secondary);
        }
        
        .btn-danger {
            background: var(--error);
        }
        
        /* Switch Toggle */
        .switch {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
        }
        
        .switch input {
            display: none;
        }
        
        .switch-slider {
            width: 44px;
            height: 24px;
            background: var(--border-color);
            border-radius: 12px;
            position: relative;
            transition: background 0.3s;
        }
        
        .switch input:checked + .switch-slider {
            background: var(--tab-active);
        }
        
        .switch-slider::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: transform 0.3s;
        }
        
        .switch input:checked + .switch-slider::after {
            transform: translateX(20px);
        }
        
        select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            cursor: pointer;
            font-size: 14px;
        }
        
        /* Main Container */
        .main-container {
            display: flex;
            height: calc(100vh - 61px);
            overflow: hidden;
        }
        
        /* Desktop Layout with Split.js */
        .split-container {
            display: flex;
            height: 100%;
            width: 100%;
        }
        
        .editors-split-container {
            display: flex;
            flex-direction: column;
            min-width: 200px;
            overflow: hidden;
        }
        
        .editor-panel {
            display: flex;
            flex-direction: column;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            overflow: hidden;
        }
        
        .editor-header {
            padding: 8px 12px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-primary);
        }
        
        .editor-wrapper {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        /* CodeMirror 5 styling */
        .CodeMirror {
            height: 100% !important;
            font-size: 14px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }
        
        .CodeMirror-scroll {
            height: 100%;
        }
        
        /* Split.js styling */
        .gutter {
            background-color: var(--bg-tertiary);
            background-repeat: no-repeat;
            background-position: 50%;
            cursor: col-resize;
        }
        
        .gutter.gutter-horizontal {
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
        }
        
        .gutter.gutter-vertical {
            cursor: row-resize;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=');
        }
        
        /* Mobile Layout with Tabs */
        .mobile-tabs-container {
            display: none;
        }
        
        .mobile-tabs {
            display: flex;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }
        
        .mobile-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            font-weight: 500;
            font-size: 14px;
        }
        
        .mobile-tab:hover {
            background: rgba(0, 122, 204, 0.1);
        }
        
        .mobile-tab.active {
            background: var(--bg-secondary);
            border-bottom-color: var(--tab-active);
            color: var(--tab-active);
        }
        
        .mobile-editor-panels {
            flex: 1;
            position: relative;
            overflow: hidden;
        }
        
        .mobile-editor-panel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
        }
        
        .mobile-editor-panel.active {
            display: flex;
            flex-direction: column;
        }
        
        /* Preview Container */
        .preview-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            overflow: hidden;
        }
        
        .preview-header {
            padding: 12px 20px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .preview-header h2 {
            font-size: 16px;
            font-weight: 600;
        }
        
        .view-controls {
            display: flex;
            gap: 8px;
        }
        
        .view-size {
            padding: 6px 12px;
            border: 1px solid var(--border-color);
            background: var(--bg-secondary);
            border-radius: 4px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s;
        }
        
        .view-size:hover {
            background: var(--tab-active);
            color: white;
            border-color: var(--tab-active);
        }
        
        .view-size.active {
            background: var(--tab-active);
            color: white;
            border-color: var(--tab-active);
        }
        
        .preview-frame-wrapper {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: #f0f0f0;
            overflow: auto;
        }
        
        body.dark-theme .preview-frame-wrapper {
            background: #2a2a2a;
        }
        
        #preview-frame {
            width: 100%;
            height: 100%;
            border: 1px solid var(--border-color);
            background: white;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        #preview-frame.mobile {
            width: 375px;
            max-width: 100%;
        }
        
        #preview-frame.tablet {
            width: 768px;
            max-width: 100%;
        }
        
        /* Analysis Panel */
        .analysis-panel {
            width: 350px;
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .analysis-header {
            padding: 16px 20px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }
        
        .analysis-header h3 {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .analysis-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .analysis-section {
            margin-bottom: 20px;
        }
        
        .analysis-section h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background: var(--bg-primary);
            border-radius: 4px;
            margin-bottom: 8px;
        }
        
        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .stat-value {
            font-weight: 600;
            font-size: 14px;
        }
        
        .issue-item {
            padding: 12px;
            background: var(--bg-primary);
            border-left: 3px solid var(--warning);
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        .issue-item.error {
            border-left-color: var(--error);
        }
        
        .issue-item.success {
            border-left-color: var(--success);
        }
        
        .issue-title {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 4px;
        }
        
        .issue-message {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-success {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
        }
        
        .status-error {
            background: rgba(244, 67, 54, 0.1);
            color: var(--error);
        }
        
        /* Responsive */
        @media (min-width: 969px) {
            /* Hide mobile components on desktop */
            .mobile-tabs-container,
            .mobile-preview {
                display: none !important;
            }
        }
        
        @media (max-width: 1200px) {
            .analysis-panel {
                width: 300px;
            }
        }
        
        @media (max-width: 968px) {
            /* Hide desktop split layout */
            .split-container {
                display: none;
            }
            
            /* Show mobile tabs layout */
            .mobile-tabs-container {
                display: flex !important;
                flex-direction: column;
                flex: 1;
            }
            
            .mobile-preview {
                display: flex !important;
            }
            
            .main-container {
                flex-direction: column;
            }
            
            .preview-container {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                height: 40%;
            }
            
            .analysis-panel {
                display: none; /* Hide analysis panel on mobile */
            }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }
        
        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <!-- Control Bar -->
    <div class="control-bar">
        <div class="control-group">
            <button class="btn" id="run-all" title="Executar c√≥digo completo (HTML+CSS+JS)">
                ‚ñ∂ Executar Tudo
            </button>
            <label class="switch" title="Quando ativo, executa apenas o HTML da aba ativa">
                <input type="checkbox" id="html-modular-toggle">
                <span class="switch-slider"></span>
                <span>HTML Modular</span>
            </label>
            <button class="btn btn-danger" id="reset-btn" title="Limpar todos os editores">
                üîÑ Resetar
            </button>
        </div>
        
        <div class="control-group">
            <select id="examples" title="Carregar exemplos pr√©-configurados">
                <option value="">üí° Exemplos...</option>
                <option value="form">Formul√°rio B√°sico</option>
                <option value="card">Card de Produto</option>
                <option value="nav">Navega√ß√£o Responsiva</option>
            </select>
            <button class="btn btn-secondary" id="save-btn" title="Salvar c√≥digo localmente">
                üíæ Salvar
            </button>
            <button class="btn btn-secondary" id="copy-btn" title="Copiar c√≥digo completo">
                üìã Copiar
            </button>
            <button class="btn btn-secondary" id="theme-toggle" title="Alternar tema claro/escuro">
                üåô Tema
            </button>
        </div>
    </div>
    
    <!-- Main Container -->
    <div class="main-container">
        <!-- Desktop: Split Layout -->
        <div class="split-container">
            <!-- Left: Editors with Split.js -->
            <div class="editors-split-container" id="editors-split">
                <!-- HTML Editor Panel -->
                <div class="editor-panel" id="html-panel">
                    <div class="editor-header">
                        <span>üìÑ</span> HTML
                    </div>
                    <div class="editor-wrapper">
                        <div id="html-editor"></div>
                    </div>
                </div>
                
                <!-- CSS Editor Panel -->
                <div class="editor-panel" id="css-panel">
                    <div class="editor-header">
                        <span>üé®</span> CSS
                    </div>
                    <div class="editor-wrapper">
                        <div id="css-editor"></div>
                    </div>
                </div>
                
                <!-- JS Editor Panel -->
                <div class="editor-panel" id="js-panel">
                    <div class="editor-header">
                        <span>‚ö°</span> JavaScript
                    </div>
                    <div class="editor-wrapper">
                        <div id="js-editor"></div>
                    </div>
                </div>
            </div>
            
            <!-- Right: Preview -->
            <div class="preview-container" id="preview-panel">
                <div class="preview-header">
                    <h2>üëÅÔ∏è Visualiza√ß√£o</h2>
                    <div class="view-controls">
                        <button class="view-size" data-size="mobile" title="Visualiza√ß√£o Mobile (375px)">üì±</button>
                        <button class="view-size" data-size="tablet" title="Visualiza√ß√£o Tablet (768px)">üìò</button>
                        <button class="view-size active" data-size="desktop" title="Visualiza√ß√£o Desktop (100%)">üñ•Ô∏è</button>
                    </div>
                </div>
                <div class="preview-frame-wrapper">
                    <iframe id="preview-frame" sandbox="allow-scripts allow-same-origin"></iframe>
                </div>
            </div>
        </div>
        
        <!-- Mobile: Tabs Layout -->
        <div class="mobile-tabs-container">
            <div class="mobile-tabs">
                <div class="mobile-tab active" data-lang="html">üìÑ HTML</div>
                <div class="mobile-tab" data-lang="css">üé® CSS</div>
                <div class="mobile-tab" data-lang="js">‚ö° JS</div>
            </div>
            <div class="mobile-editor-panels">
                <div class="mobile-editor-panel active" id="mobile-html-panel">
                    <div class="editor-wrapper">
                        <div id="mobile-html-editor"></div>
                    </div>
                </div>
                <div class="mobile-editor-panel" id="mobile-css-panel">
                    <div class="editor-wrapper">
                        <div id="mobile-css-editor"></div>
                    </div>
                </div>
                <div class="mobile-editor-panel" id="mobile-js-panel">
                    <div class="editor-wrapper">
                        <div id="mobile-js-editor"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Preview Area (for mobile) -->
        <div class="preview-container mobile-preview">
            <div class="preview-header">
                <h2>üëÅÔ∏è Visualiza√ß√£o</h2>
                <div class="view-controls">
                    <button class="view-size" data-size="mobile" title="Visualiza√ß√£o Mobile (375px)">üì±</button>
                    <button class="view-size" data-size="tablet" title="Visualiza√ß√£o Tablet (768px)">üìò</button>
                    <button class="view-size active" data-size="desktop" title="Visualiza√ß√£o Desktop (100%)">üñ•Ô∏è</button>
                </div>
            </div>
            <div class="preview-frame-wrapper">
                <iframe id="preview-frame" sandbox="allow-scripts"></iframe>
            </div>
        </div>
        
        <!-- Analysis Panel -->
        <div class="analysis-panel">
            <div class="analysis-header">
                <h3>üìä An√°lise do C√≥digo</h3>
            </div>
            <div class="analysis-content" id="analysis-content">
                <div class="empty-state">
                    <div class="empty-state-icon">üìä</div>
                    <p>Execute o c√≥digo para ver a an√°lise</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Constants
        const MOBILE_BREAKPOINT = 968;

        // Estado da aplica√ß√£o
        const state = {
            currentLang: 'html',
            isModular: false,
            currentViewSize: 'desktop',
            theme: localStorage.getItem('theme') || 'dark',
            autoSave: true,
            debounceTimer: null,
            isMobile: window.innerWidth <= MOBILE_BREAKPOINT
        };

        // CodeMirror instances
        const editors = {
            html: null,
            css: null,
            js: null,
            mobileHtml: null,
            mobileCss: null,
            mobileJs: null
        };

        // Split.js instances
        let splitInstance = null;
        let mainSplitInstance = null;

        // Elementos DOM
        const elements = {
            previewFrame: document.getElementById('preview-frame'),
            mobilePreviewFrame: document.getElementById('mobile-preview-frame'),
            runAllBtn: document.getElementById('run-all'),
            resetBtn: document.getElementById('reset-btn'),
            modularToggle: document.getElementById('html-modular-toggle'),
            examplesSelect: document.getElementById('examples'),
            saveBtn: document.getElementById('save-btn'),
            copyBtn: document.getElementById('copy-btn'),
            themeToggle: document.getElementById('theme-toggle'),
            viewSizeBtns: document.querySelectorAll('.view-size'),
            analysisContent: document.getElementById('analysis-content'),
            mobileTabs: document.querySelectorAll('.mobile-tab'),
            mobileEditorPanels: document.querySelectorAll('.mobile-editor-panel')
        };

        // Default code templates
        const defaultCode = {
            html: `<header>
    <h1>Meu Site</h1>
    <nav>
        <a href="#home">Home</a>
        <a href="#about">Sobre</a>
        <a href="#contact">Contato</a>
    </nav>
</header>

<main>
    <section>
        <h2>Bem-vindo!</h2>
        <p>Este √© um exemplo de estrutura HTML b√°sica.</p>
        <button id="myButton">Clique Aqui</button>
    </section>
</main>

<footer>
    <p>&copy; 2024 Meu Site. Todos os direitos reservados.</p>
</footer>`,
            css: `* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
}

header {
    background: #333;
    color: white;
    padding: 20px;
    text-align: center;
}

nav {
    margin-top: 10px;
}

nav a {
    color: white;
    margin: 0 15px;
    text-decoration: none;
}

main {
    padding: 40px 20px;
    max-width: 1200px;
    margin: 0 auto;
}

button {
    padding: 10px 20px;
    background: #007acc;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

button:hover {
    background: #005fa3;
}

footer {
    background: #f4f4f4;
    text-align: center;
    padding: 20px;
    margin-top: 40px;
}`,
            js: `// Event listener para o bot√£o
document.addEventListener('DOMContentLoaded', function() {
    const button = document.getElementById('myButton');
    
    if (button) {
        button.addEventListener('click', function() {
            alert('Bot√£o clicado! üéâ');
        });
    }
});

console.log('JavaScript carregado com sucesso!');`
        };

        // Inicializa√ß√£o
        function init() {
            applyTheme();
            initializeCodeMirror();
            loadFromLocalStorage();
            setupEventListeners();
            setupResponsive();
            executeCode();
        }

        // Inicializar CodeMirror
        function initializeCodeMirror() {
            const cmConfig = (mode) => ({
                mode: mode,
                theme: state.theme === 'dark' ? 'monokai' : 'eclipse',
                lineNumbers: true,
                indentUnit: 4,
                tabSize: 4,
                indentWithTabs: false,
                lineWrapping: true,
                autoCloseBrackets: true,
                autoCloseTags: true,
                matchBrackets: true,
                extraKeys: {
                    "Tab": (cm) => cm.execCommand("indentMore"),
                    "Shift-Tab": (cm) => cm.execCommand("indentLess")
                }
            });

            // Desktop editors
            if (!state.isMobile) {
                editors.html = CodeMirror(document.getElementById('html-editor'), {
                    ...cmConfig('htmlmixed'),
                    value: defaultCode.html
                });

                editors.css = CodeMirror(document.getElementById('css-editor'), {
                    ...cmConfig('css'),
                    value: defaultCode.css
                });

                editors.js = CodeMirror(document.getElementById('js-editor'), {
                    ...cmConfig('javascript'),
                    value: defaultCode.js
                });

                // Auto-execute with debounce
                [editors.html, editors.css, editors.js].forEach(editor => {
                    editor.on('change', () => {
                        clearTimeout(state.debounceTimer);
                        state.debounceTimer = setTimeout(() => {
                            executeCode();
                            if (state.autoSave) saveToLocalStorage();
                        }, 500);
                    });
                });

                // Initialize Split.js for desktop
                initializeSplitJS();
            } else {
                // Mobile editors
                editors.mobileHtml = CodeMirror(document.getElementById('mobile-html-editor'), {
                    ...cmConfig('htmlmixed'),
                    value: defaultCode.html
                });

                editors.mobileCss = CodeMirror(document.getElementById('mobile-css-editor'), {
                    ...cmConfig('css'),
                    value: defaultCode.css
                });

                editors.mobileJs = CodeMirror(document.getElementById('mobile-js-editor'), {
                    ...cmConfig('javascript'),
                    value: defaultCode.js
                });

                // Auto-execute with debounce
                [editors.mobileHtml, editors.mobileCss, editors.mobileJs].forEach(editor => {
                    editor.on('change', () => {
                        clearTimeout(state.debounceTimer);
                        state.debounceTimer = setTimeout(() => {
                            executeCode();
                            if (state.autoSave) saveToLocalStorage();
                        }, 500);
                    });
                });
            }
        }

        // Inicializar Split.js para desktop
        function initializeSplitJS() {
            if (state.isMobile) return;

            // Split the 3 editor panels vertically (stacked on top of each other)
            splitInstance = Split(['#html-panel', '#css-panel', '#js-panel'], {
                sizes: [33.33, 33.33, 33.33],
                minSize: 100,
                gutterSize: 8,
                cursor: 'row-resize',
                direction: 'vertical'
            });

            // Split editors container and preview horizontally (side by side)
            mainSplitInstance = Split(['.editors-split-container', '#preview-panel'], {
                sizes: [50, 50],
                minSize: 200,
                gutterSize: 8,
                cursor: 'col-resize',
                direction: 'horizontal'
            });
        }

        // Setup responsive behavior
        function setupResponsive() {
            window.addEventListener('resize', () => {
                const wasMobile = state.isMobile;
                state.isMobile = window.innerWidth <= MOBILE_BREAKPOINT;

                // Refresh CodeMirror on resize
                if (state.isMobile) {
                    if (editors.mobileHtml) editors.mobileHtml.refresh();
                    if (editors.mobileCss) editors.mobileCss.refresh();
                    if (editors.mobileJs) editors.mobileJs.refresh();
                } else {
                    if (editors.html) editors.html.refresh();
                    if (editors.css) editors.css.refresh();
                    if (editors.js) editors.js.refresh();
                }
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Mobile tabs
            elements.mobileTabs.forEach(tab => {
                tab.addEventListener('click', () => switchMobileTab(tab.dataset.lang));
            });

            // Run button
            elements.runAllBtn.addEventListener('click', executeCode);

            // Reset button
            elements.resetBtn.addEventListener('click', resetAll);

            // Examples
            elements.examplesSelect.addEventListener('change', loadExample);

            // Save button
            elements.saveBtn.addEventListener('click', saveToLocalStorage);

            // Copy button
            elements.copyBtn.addEventListener('click', copyCode);

            // Theme toggle
            elements.themeToggle.addEventListener('click', toggleTheme);

            // View size buttons
            elements.viewSizeBtns.forEach(btn => {
                btn.addEventListener('click', () => changeViewSize(btn.dataset.size));
            });
        }

        // Switch mobile tab
        function switchMobileTab(lang) {
            state.currentLang = lang;

            elements.mobileTabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.lang === lang);
            });

            elements.mobileEditorPanels.forEach(panel => {
                const panelLang = panel.id.replace('mobile-', '').replace('-panel', '');
                panel.classList.toggle('active', panelLang === lang);
            });

            // Refresh the active editor
            if (editors.mobileHtml && lang === 'html') editors.mobileHtml.refresh();
            if (editors.mobileCss && lang === 'css') editors.mobileCss.refresh();
            if (editors.mobileJs && lang === 'js') editors.mobileJs.refresh();
        }

        // Get code from active editors
        function getCode() {
            if (state.isMobile) {
                return {
                    html: editors.mobileHtml ? editors.mobileHtml.getValue() : '',
                    css: editors.mobileCss ? editors.mobileCss.getValue() : '',
                    js: editors.mobileJs ? editors.mobileJs.getValue() : ''
                };
            } else {
                return {
                    html: editors.html ? editors.html.getValue() : '',
                    css: editors.css ? editors.css.getValue() : '',
                    js: editors.js ? editors.js.getValue() : ''
                };
            }
            
            // Injetar no iframe usando srcdoc
            elements.previewFrame.srcdoc = fullCode;
            
            // Analisar c√≥digo
            analyzeCode();
        }

        // Set code to active editors
        function setCode(html, css, js) {
            if (state.isMobile) {
                if (editors.mobileHtml) editors.mobileHtml.setValue(html || '');
                if (editors.mobileCss) editors.mobileCss.setValue(css || '');
                if (editors.mobileJs) editors.mobileJs.setValue(js || '');
            } else {
                if (editors.html) editors.html.setValue(html || '');
                if (editors.css) editors.css.setValue(css || '');
                if (editors.js) editors.js.setValue(js || '');
            }
        }

        // Execute code
        function executeCode() {
            const code = getCode();
            
            const fullCode = `
                <!DOCTYPE html>
                <html lang="pt-BR">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <style>${code.css}</style>
                </head>
                <body>
                    ${code.html}
                    <script>${code.js}<\/script>
                </body>
                </html>
            `;

            elements.previewFrame.srcdoc = fullCode;
            if (elements.mobilePreviewFrame) {
                elements.mobilePreviewFrame.srcdoc = fullCode;
            }
            analyzeHTML(code.html);
        }

        // Analyze HTML
        function analyzeHTML(html) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            // Basic statistics
            const stats = {
                elements: doc.body.querySelectorAll('*').length,
                images: doc.querySelectorAll('img').length,
                links: doc.querySelectorAll('a').length,
                headings: doc.querySelectorAll('h1, h2, h3, h4, h5, h6').length,
                forms: doc.querySelectorAll('form').length
            };

            // Quality checks
            const issues = [];

            // Check images without alt
            const imagesWithoutAlt = doc.querySelectorAll('img:not([alt])');
            if (imagesWithoutAlt.length > 0) {
                issues.push({
                    type: 'warning',
                    title: 'Acessibilidade',
                    message: `${imagesWithoutAlt.length} imagem(ns) sem atributo alt`
                });
            }

            // Check empty links
            const emptyLinks = Array.from(doc.querySelectorAll('a')).filter(a => !a.textContent.trim());
            if (emptyLinks.length > 0) {
                issues.push({
                    type: 'warning',
                    title: 'Acessibilidade',
                    message: `${emptyLinks.length} link(s) sem texto`
                });
            }

            // Check semantic structure
            const hasHeader = doc.querySelector('header');
            const hasNav = doc.querySelector('nav');
            const hasMain = doc.querySelector('main');
            const hasFooter = doc.querySelector('footer');

            if (!hasHeader && !hasNav && !hasMain && !hasFooter) {
                issues.push({
                    type: 'info',
                    title: 'Estrutura Sem√¢ntica',
                    message: 'Considere usar tags sem√¢nticas (header, nav, main, footer)'
                });
            }

            renderAnalysis(stats, issues);
        }

        // Render analysis
        function renderAnalysis(stats, issues) {
            let html = `
                <div class="analysis-section">
                    <h4>Estat√≠sticas</h4>
                    <div class="stat-item">
                        <span class="stat-label">Total de Elementos</span>
                        <span class="stat-value">${stats.elements}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Imagens</span>
                        <span class="stat-value">${stats.images}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Links</span>
                        <span class="stat-value">${stats.links}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">T√≠tulos</span>
                        <span class="stat-value">${stats.headings}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Formul√°rios</span>
                        <span class="stat-value">${stats.forms}</span>
                    </div>
                </div>
            `;

            if (issues.length > 0) {
                html += `
                    <div class="analysis-section">
                        <h4>Sugest√µes de Qualidade</h4>
                        ${issues.map(issue => `
                            <div class="issue-item ${issue.type}">
                                <div class="issue-title">${issue.title}</div>
                                <div class="issue-message">${issue.message}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                html += `
                    <div class="analysis-section">
                        <div class="issue-item success">
                            <div class="issue-title">‚úÖ Tudo Certo!</div>
                            <div class="issue-message">Nenhum problema detectado</div>
                        </div>
                    </div>
                `;
            }

            elements.analysisContent.innerHTML = html;
        }

        // Reset all
        function resetAll() {
            if (confirm('Tem certeza que deseja limpar todo o c√≥digo?')) {
                setCode('', '', '');
                elements.previewFrame.srcdoc = '';
                elements.analysisContent.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìä</div>
                        <p>Execute o c√≥digo para ver a an√°lise</p>
                    </div>
                `;
                localStorage.removeItem('htmlCode');
                localStorage.removeItem('cssCode');
                localStorage.removeItem('jsCode');
            }
        }

        // Load example
        function loadExample(e) {
            const example = e.target.value;
            if (!example) return;

            const examples = {
                form: {
                    html: `<div class="form-container">
    <h2>Formul√°rio de Contato</h2>
    <form id="contactForm">
        <div class="form-group">
            <label for="name">Nome:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label for="message">Mensagem:</label>
            <textarea id="message" name="message" rows="4" required></textarea>
        </div>
        <button type="submit">Enviar</button>
    </form>
</div>`,
                    css: `.form-container {
    max-width: 500px;
    margin: 50px auto;
    padding: 30px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

h2 {
    margin-bottom: 20px;
    color: #333;
}

.form-group {
    margin-bottom: 15px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #555;
}

input, textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

button {
    width: 100%;
    padding: 12px;
    background: #007acc;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

button:hover {
    background: #005fa3;
}`,
                    js: `document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const message = document.getElementById('message').value;
    
    alert('Formul√°rio enviado!\\n\\nNome: ' + name + '\\nE-mail: ' + email + '\\nMensagem: ' + message);
    
    this.reset();
});`
                },
                card: {
                    html: `<div class="card">
    <img src="https://via.placeholder.com/300x200" alt="Produto">
    <div class="card-content">
        <h2>Produto Incr√≠vel</h2>
        <p class="price">R$ 99,90</p>
        <p>Descri√ß√£o do produto com detalhes importantes.</p>
        <button class="btn-buy">Comprar Agora</button>
    </div>
</div>`,
                    css: `.card {
    max-width: 300px;
    margin: 50px auto;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    overflow: hidden;
    transition: transform 0.3s;
}

.card:hover {
    transform: translateY(-5px);
}

.card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.card-content {
    padding: 20px;
}

h2 {
    margin-bottom: 10px;
    color: #333;
}

.price {
    font-size: 24px;
    font-weight: bold;
    color: #007acc;
    margin-bottom: 10px;
}

p {
    color: #666;
    margin-bottom: 20px;
}

.btn-buy {
    width: 100%;
    padding: 12px;
    background: #007acc;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
}

.btn-buy:hover {
    background: #005fa3;
}`,
                    js: `document.querySelector('.btn-buy').addEventListener('click', function() {
    alert('Produto adicionado ao carrinho! üõí');
});`
                },
                nav: {
                    html: `<nav class="navbar">
    <div class="brand">üöÄ MeuSite</div>
    <button class="menu-toggle">‚ò∞</button>
    <ul class="nav-menu">
        <li><a href="#home">Home</a></li>
        <li><a href="#sobre">Sobre</a></li>
        <li><a href="#servicos">Servi√ßos</a></li>
        <li><a href="#contato">Contato</a></li>
    </ul>
</nav>
<main class="content">
    <h1>Bem-vindo!</h1>
    <p>Esta √© uma navega√ß√£o responsiva.</p>
</main>`,
                    css: `* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 30px;
    background: #333;
    color: white;
}

.brand {
    font-size: 24px;
    font-weight: bold;
}

.menu-toggle {
    display: none;
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
}

.nav-menu {
    display: flex;
    list-style: none;
    gap: 20px;
}

.nav-menu a {
    color: white;
    text-decoration: none;
    padding: 8px 15px;
    border-radius: 4px;
    transition: background 0.3s;
}

.nav-menu a:hover {
    background: #555;
}

.content {
    padding: 40px;
    text-align: center;
}

/* Mobile */
@media (max-width: 768px) {
    .menu-toggle {
        display: block;
    }
    
    .nav-menu {
        display: none;
        position: absolute;
        top: 60px;
        left: 0;
        right: 0;
        background: #333;
        flex-direction: column;
        padding: 20px;
    }
    
    .nav-menu.active {
        display: flex;
    }
}`,
                    js: `document.querySelector('.menu-toggle').addEventListener('click', function() {
    document.querySelector('.nav-menu').classList.toggle('active');
});`
                }
            };

            if (examples[example]) {
                setCode(examples[example].html, examples[example].css, examples[example].js);
                executeCode();
                saveToLocalStorage();
            }

            // Reset select
            e.target.value = '';
        }

        // Save to localStorage
        function saveToLocalStorage() {
            const code = getCode();
            localStorage.setItem('htmlCode', code.html);
            localStorage.setItem('cssCode', code.css);
            localStorage.setItem('jsCode', code.js);

            // Visual feedback
            const btn = elements.saveBtn;
            const originalText = btn.innerHTML;
            btn.innerHTML = '‚úÖ Salvo!';
            setTimeout(() => btn.innerHTML = originalText, 2000);
        }

        // Load from localStorage
        function loadFromLocalStorage() {
            const savedHtml = localStorage.getItem('htmlCode');
            const savedCss = localStorage.getItem('cssCode');
            const savedJs = localStorage.getItem('jsCode');

            // Override defaults with saved code if available
            if (state.isMobile) {
                if (savedHtml && editors.mobileHtml) editors.mobileHtml.setValue(savedHtml);
                if (savedCss && editors.mobileCss) editors.mobileCss.setValue(savedCss);
                if (savedJs && editors.mobileJs) editors.mobileJs.setValue(savedJs);
            } else {
                if (savedHtml && editors.html) editors.html.setValue(savedHtml);
                if (savedCss && editors.css) editors.css.setValue(savedCss);
                if (savedJs && editors.js) editors.js.setValue(savedJs);
            }
        }

        // Copy code
        function copyCode() {
            const code = getCode();

            const fullCode = `<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Projeto</title>
    <style>
${code.css}
    </style>
</head>
<body>
${code.html}
    <script>
${code.js}
    <\/script>
</body>
</html>`;

            navigator.clipboard.writeText(fullCode).then(() => {
                const btn = elements.copyBtn;
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚úÖ Copiado!';
                setTimeout(() => btn.innerHTML = originalText, 2000);
            }).catch(err => {
                alert('Erro ao copiar: ' + err);
            });
        }

        // Toggle theme
        function toggleTheme() {
            state.theme = state.theme === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', state.theme);
            applyTheme();
            updateEditorsTheme();
        }

        // Apply theme
        function applyTheme() {
            if (state.theme === 'dark') {
                document.body.classList.add('dark-theme');
                elements.themeToggle.innerHTML = '‚òÄÔ∏è Tema';
            } else {
                document.body.classList.remove('dark-theme');
                elements.themeToggle.innerHTML = 'üåô Tema';
            }
        }

        // Update CodeMirror theme
        function updateEditorsTheme() {
            const theme = state.theme === 'dark' ? 'monokai' : 'eclipse';
            
            if (state.isMobile) {
                if (editors.mobileHtml) editors.mobileHtml.setOption('theme', theme);
                if (editors.mobileCss) editors.mobileCss.setOption('theme', theme);
                if (editors.mobileJs) editors.mobileJs.setOption('theme', theme);
            } else {
                if (editors.html) editors.html.setOption('theme', theme);
                if (editors.css) editors.css.setOption('theme', theme);
                if (editors.js) editors.js.setOption('theme', theme);
            }
        }

        // Change view size
        function changeViewSize(size) {
            state.currentViewSize = size;

            elements.viewSizeBtns.forEach(btn => {
                if (btn.dataset.size === size) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            elements.previewFrame.className = size;
        }

        // Start application
        init();
    </script>
</body>
</html>
